{"add_lottery_total":{"id":"add_lottery_total","name":"每日用户抽卷总数","field_names":{"date":"时间","total":"每日用户抽卷总数"},"charts":{"user_add_lottery_total":{"id":"user_add_lottery_total","name":"每日用户抽卷总数","y":"total","x":"date"}},"sql":"SELECT COUNT(DISTINCT `lottery`.`u_id`) AS `total`, DATE_FORMAT(`lottery`.`created_on`, '%Y-%m-%d') AS `date` FROM `jindan-a`.`lottery` GROUP BY DATE_FORMAT(`lottery`.`created_on`, '%Y-%m-%d')","database_service_name":"jindan","time_range":"last_month_date"},"new_add_user_for_for_lottery":{"id":"new_add_user_for_for_lottery","name":"奖券活动的新增注册数","field_names":{"date":"时间","total":"奖券活动的新增注册数"},"charts":{"new_add_user_for_for_lottery":{"id":"new_add_user_for_for_lottery","name":"奖券活动的新增注册数","y":"total","x":"date"}},"sql":"SELECT COUNT(DISTINCT `lo`.`u_id`) AS `total`, DATE_FORMAT(FROM_UNIXTIME(`ut`.`ut_create_time`), '%Y-%m-%d') AS `date` FROM `jindan-a`.`lottery` AS `lo` LEFT JOIN `jd-user`.`user_third` AS `ut` ON `lo`.`u_id` = `ut`.`u_id` WHERE FROM_UNIXTIME(`ut`.`ut_create_time`) > '2015-09-07 00:00:00' GROUP BY DATE_FORMAT(FROM_UNIXTIME(`ut`.`ut_create_time`), '%Y-%m-%d')","database_service_name":"jindan","time_range":"last_month_date"},"day_register_user_for_jindan":{"id":"day_register_user_for_jindan","name":"日注册用户","field_names":{"u_rt":"日期","total":"用户数"},"charts":{"day_register_user_for_jindan":{"id":"day_register_user_for_jindan","name":"日注册用户","y":"total","x":"u_rt"}},"sql":"SELECT DATE(from_unixtime(u_register_time)) AS u_rt, COUNT(u_id) total FROM `jd-user`.user GROUP BY DATE(FROM_UNIXTIME(u_register_time)) ORDER BY DATE(FROM_UNIXTIME(u_register_time)) DESC;","database_service_name":"jindan","time_range":"last_month_date"},"day_bind_card_user_for_jindan":{"id":"day_bind_card_user_for_jindan","name":"日绑卡用户数","field_names":{"dd":"日期","cc":"用户数"},"charts":{"day_bind_card_user_for_jindan":{"id":"day_bind_card_user_for_jindan","name":"日注绑卡用户数","y":"cc","x":"dd"}},"sql":"SELECT DATE(ua_create_time) dd, COUNT(distinct jua.u_id) cc FROM `jd-java`.user_account jua WHERE jua.ua_bank_card IS NOT NULL GROUP BY DATE(ua_create_time) ORDER BY DATE(ua_create_time) DESC","database_service_name":"jindan_java","time_range":"last_month_date"},"day_rollout_user_for_jindan":{"id":"day_rollout_user_for_jindan","name":"日提现金额","field_names":{"dd":"日期","cc":"用户数","ss":"提现金额(w)"},"charts":{"day_rollout_user_for_jindan":{"id":"day_rollout_user_for_jindan","name":"日提现金额数","y":"ss","x":"dd"}},"sql":"SELECT DATE(ff_complete_time) dd, COUNT(distinct u_id) cc, CEIL(SUM(ff.ff_money/1000000)) ss FROM `jd-java`.funds_flow ff WHERE ff_status IN (0, 1, 2) AND ff_trans_type = 'ROLLOUT' AND ff_money>9999 GROUP BY DATE(ff_complete_time) ORDER BY DATE(ff_complete_time) DESC;","database_service_name":"jindan_java","time_range":"last_month_date"},"day_rechange_user_for_jindan":{"id":"day_rechange_user_for_jindan","name":"日充值金额","field_names":{"dd":"日期","cc":"用户数","ss":"充值金额"},"charts":{"day_rechange_user_for_jindan":{"id":"day_rechange_user_for_jindan","name":"日充值金额数","y":"ss","x":"dd"}},"sql":"SELECT DATE(ff_complete_time) dd, COUNT(DISTINCT u_id) cc, CEIL(SUM(ff.ff_money/1000000)) ss FROM `jd-java`.funds_flow ff WHERE ff_status IN (0, 1, 2) AND ff_trans_type = 'RECHARGES' AND ff_money>9999 GROUP BY DATE(ff_complete_time) ORDER BY DATE(ff_complete_time) DESC;","database_service_name":"jindan_java","time_range":"last_month_date"},"day_new_rechange_user_for_jindan":{"id":"day_new_rechange_user_for_jindan","name":"日新增投资金额","field_names":{"dd":"日期","cc":"用户数"},"charts":{"day_new_rechange_user_for_jindan":{"id":"day_new_rechange_user_for_jindan","name":"日新增投资金额","y":"cc","x":"dd"}},"sql":" SELECT date(ff_create_time) dd, COUNT(DISTINCT U_ID) cc FROM funds_flow FF WHERE ff_status  in (0,1, 2) AND ff_trans_type='RECHARGES' AND ff_type IS NULL AND NOT EXISTS(SELECT 1 FROM funds_flow FF2 where FF2.ff_trans_type='RECHARGES' AND FF2.ff_type IS NULL AND FF.ua_id = FF2.UA_ID  AND ff_status  IN (0,1,2)  AND FF2.FF_CREATE_TIME < FF.ff_create_time) GROUP BY DATE(ff_create_time) ORDER BY DATE(ff_create_time) DESC","database_service_name":"jindan_java","time_range":"last_month_date"},"new_add_bund_card_juser_for_jindan":{"id":"new_add_bund_card_user_for_jindan","name":"周新增绑卡用户数","field_names":{"ww_ctime":"周时间","ww_uct":"周数","total":"用户数"},"charts":{"new_add_user_for_for_lottery":{"id":"new_add_bund_card_user_for_jindan","name":"周新增绑卡用户数","y":"total","x":"ww_uct"}},"sql":"SELECT DATE(`jua`.`ua_create_time`)-WEEKDAY(`jua`.`ua_create_time`) AS `ww_ctime`, WEEKOFYEAR(`jua`.`ua_create_time`) AS `ww_uct`, COUNT(DISTINCT `jua`.`u_id`) AS `total` FROM `jd-java`.`user_account` AS `jua` WHERE `jua`.`ua_bank_card` IS NOT NULL AND DATE(`jua`.`ua_create_time`) > '2015-07-01' GROUP BY WEEKOFYEAR(`jua`.`ua_create_time`) ORDER BY WEEKOFYEAR(`jua`.`ua_create_time`) DESC","database_service_name":"jindan_java","time_range":"last_month_date"},"week_recharge_rollout_for_jd":{"id":"week_recharge_rollout_for_jd","name":"周充值提现数","field_names":{"ww_ctime":"周时间","ww":"周数","rechargemoney":"充值","rolloutmoney":"提现","evenmoney":"留存"},"charts":{"new_add_user_for_for_lottery":{"id":"week_recharge_rollout_for_jd","name":"周新增绑卡用户数","y":"rechargemoney","x":"ww"}},"sql":"SELECT DATE(ff_complete_time)-WEEKDAY(ff_complete_time) ww_ctime, WEEKOFYEAR(ff_complete_time) ww, CEIL(SUM(IF(ff_trans_type = 'RECHARGES',ff.ff_money/1000000,0))) rechargemoney, CEIL(SUM(IF(ff_trans_type = 'ROLLOUT',ff.ff_money/1000000,0)))  rolloutmoney, CEIL(SUM(IF(ff_trans_type = 'RECHARGES',ff.ff_money/1000000,0))) - CEIL(SUM(IF(ff_trans_type = 'ROLLOUT',ff.ff_money/1000000,0)))   evenmoney FROM `jd-java`.funds_flow ff WHERE ff_status IN (0, 1, 2) AND DATE(ff_complete_time) > '2015-07-01' GROUP BY WEEKOFYEAR(ff_complete_time) ORDER BY weekofyear(ff_complete_time) DESC","database_service_name":"jindan_java","time_range":""},"week_rollout_users_for_jd":{"id":"week_rollout_users_for_jd","name":"周提现用户数","field_names":{"ww_ctime":"周时间","ww":"周数","cc":"用户数"},"charts":{"new_add_user_for_for_lottery":{"id":"new_add_bund_card_user_for_jindan","name":"周提现用户数","y":"cc","x":"ww"}},"sql":"SELECT DATE(ff_complete_time)-WEEKDAY(ff_complete_time) ww_ctime, WEEKOFYEAR(ff_complete_time) ww, COUNT(DISTINCT u_id) cc FROM `jd-java`.funds_flow ff WHERE ff_status IN (0, 1, 2) AND ff_trans_type = 'ROLLOUT' AND DATE(ff.ff_complete_time)>'2015-07-01' and ff_money>9999 GROUP BY WEEKOFYEAR(ff_complete_time) ORDER BY WEEKOFYEAR(ff_complete_time) DESC;","database_service_name":"jindan_java","time_range":""}}
